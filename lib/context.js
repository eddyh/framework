"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
let Context = exports.Context = class Context {

  constructor(stack, request, response) {
    this.body = "";
    this.data = {};

    this.stack = stack;
    this.request = request;
    this.response = response;

    Object.seal(this);
  }

  get(header) {
    return this.request.headers[header.toLowerCase()];
  }

  get method() {
    return this.request.method;
  }

  get url() {
    return this.request.url;
  }

  set(header, value) {
    this.response.setHeader(header, value);
  }

  set status(value) {
    if (value < 100 || value > 999) {
      throw new RangeError(`Invalid status code ${value}`);
    }

    this.response.statusCode = value;
  }

  get sent() {
    return this.response.headersSent;
  }

  inspect() {
    return {
      stack: this.stack,
      data: this.data,
      req: "<node req>",
      res: "<node res>"
    };
  }
};
exports.default = Context;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9jb250ZXh0LmpzIl0sIm5hbWVzIjpbIkNvbnRleHQiLCJjb25zdHJ1Y3RvciIsInN0YWNrIiwicmVxdWVzdCIsInJlc3BvbnNlIiwiYm9keSIsImRhdGEiLCJPYmplY3QiLCJzZWFsIiwiZ2V0IiwiaGVhZGVyIiwiaGVhZGVycyIsInRvTG93ZXJDYXNlIiwibWV0aG9kIiwidXJsIiwic2V0IiwidmFsdWUiLCJzZXRIZWFkZXIiLCJzdGF0dXMiLCJSYW5nZUVycm9yIiwic3RhdHVzQ29kZSIsInNlbnQiLCJoZWFkZXJzU2VudCIsImluc3BlY3QiLCJyZXEiLCJyZXMiXSwibWFwcGluZ3MiOiI7Ozs7O0lBT2FBLE8sV0FBQUEsTyxHQUFOLE1BQU1BLE9BQU4sQ0FBYzs7QUFRbkJDLGNBQVlDLEtBQVosRUFBMEJDLE9BQTFCLEVBQW9EQyxRQUFwRCxFQUE4RTtBQUFBLFNBSDlFQyxJQUc4RSxHQUh0RCxFQUdzRDtBQUFBLFNBRjlFQyxJQUU4RSxHQUYvRCxFQUUrRDs7QUFDNUUsU0FBS0osS0FBTCxHQUFhQSxLQUFiO0FBQ0EsU0FBS0MsT0FBTCxHQUFlQSxPQUFmO0FBQ0EsU0FBS0MsUUFBTCxHQUFnQkEsUUFBaEI7O0FBRUFHLFdBQU9DLElBQVAsQ0FBWSxJQUFaO0FBQ0Q7O0FBRURDLE1BQUlDLE1BQUosRUFBb0I7QUFDbEIsV0FBTyxLQUFLUCxPQUFMLENBQWFRLE9BQWIsQ0FBcUJELE9BQU9FLFdBQVAsRUFBckIsQ0FBUDtBQUNEOztBQUVELE1BQUlDLE1BQUosR0FBcUI7QUFDbkIsV0FBTyxLQUFLVixPQUFMLENBQWFVLE1BQXBCO0FBQ0Q7O0FBRUQsTUFBSUMsR0FBSixHQUFrQjtBQUNoQixXQUFPLEtBQUtYLE9BQUwsQ0FBYVcsR0FBcEI7QUFDRDs7QUFFREMsTUFBSUwsTUFBSixFQUFvQk0sS0FBcEIsRUFBbUM7QUFDakMsU0FBS1osUUFBTCxDQUFjYSxTQUFkLENBQXdCUCxNQUF4QixFQUFnQ00sS0FBaEM7QUFDRDs7QUFFRCxNQUFJRSxNQUFKLENBQVdGLEtBQVgsRUFBMEI7QUFDeEIsUUFBSUEsUUFBUSxHQUFSLElBQWVBLFFBQVEsR0FBM0IsRUFBZ0M7QUFDOUIsWUFBTSxJQUFJRyxVQUFKLENBQWdCLHVCQUFzQkgsS0FBTSxFQUE1QyxDQUFOO0FBQ0Q7O0FBRUQsU0FBS1osUUFBTCxDQUFjZ0IsVUFBZCxHQUEyQkosS0FBM0I7QUFDRDs7QUFFRCxNQUFJSyxJQUFKLEdBQW9CO0FBQ2xCLFdBQU8sS0FBS2pCLFFBQUwsQ0FBY2tCLFdBQXJCO0FBQ0Q7O0FBRURDLFlBQVU7QUFDUixXQUFPO0FBQ0xyQixhQUFPLEtBQUtBLEtBRFA7QUFFTEksWUFBTSxLQUFLQSxJQUZOO0FBR0xrQixXQUFLLFlBSEE7QUFJTEMsV0FBSztBQUpBLEtBQVA7QUFNRDtBQW5Ea0IsQztrQkFzRE56QixPIiwiZmlsZSI6ImNvbnRleHQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuaW1wb3J0IHR5cGUge1N0YWNrfSBmcm9tIFwiLi9taWRkbGV3YXJlXCJcbmltcG9ydCB0eXBlIHtJbmNvbWluZ01lc3NhZ2UsIFNlcnZlclJlc3BvbnNlfSBmcm9tIFwiaHR0cFwiXG5cbmV4cG9ydCB0eXBlIFJlcXVlc3QgPSBJbmNvbWluZ01lc3NhZ2VcbmV4cG9ydCB0eXBlIFJlc3BvbnNlID0gU2VydmVyUmVzcG9uc2VcblxuZXhwb3J0IGNsYXNzIENvbnRleHQge1xuICBzdGFjazogU3RhY2tcbiAgcmVxdWVzdDogUmVxdWVzdFxuICByZXNwb25zZTogUmVzcG9uc2VcblxuICBib2R5OiBPYmplY3QgfCBzdHJpbmcgPSBcIlwiXG4gIGRhdGE6IE9iamVjdCA9IHt9XG5cbiAgY29uc3RydWN0b3Ioc3RhY2s6IFN0YWNrLCByZXF1ZXN0OiBJbmNvbWluZ01lc3NhZ2UsIHJlc3BvbnNlOiBTZXJ2ZXJSZXNwb25zZSkge1xuICAgIHRoaXMuc3RhY2sgPSBzdGFja1xuICAgIHRoaXMucmVxdWVzdCA9IHJlcXVlc3RcbiAgICB0aGlzLnJlc3BvbnNlID0gcmVzcG9uc2VcblxuICAgIE9iamVjdC5zZWFsKHRoaXMpXG4gIH1cblxuICBnZXQoaGVhZGVyOiBzdHJpbmcpIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0LmhlYWRlcnNbaGVhZGVyLnRvTG93ZXJDYXNlKCldXG4gIH1cblxuICBnZXQgbWV0aG9kKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdC5tZXRob2RcbiAgfVxuXG4gIGdldCB1cmwoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0LnVybFxuICB9XG5cbiAgc2V0KGhlYWRlcjogc3RyaW5nLCB2YWx1ZTogc3RyaW5nKSB7XG4gICAgdGhpcy5yZXNwb25zZS5zZXRIZWFkZXIoaGVhZGVyLCB2YWx1ZSlcbiAgfVxuXG4gIHNldCBzdGF0dXModmFsdWU6IG51bWJlcikge1xuICAgIGlmICh2YWx1ZSA8IDEwMCB8fCB2YWx1ZSA+IDk5OSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoYEludmFsaWQgc3RhdHVzIGNvZGUgJHt2YWx1ZX1gKVxuICAgIH1cblxuICAgIHRoaXMucmVzcG9uc2Uuc3RhdHVzQ29kZSA9IHZhbHVlXG4gIH1cblxuICBnZXQgc2VudCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZS5oZWFkZXJzU2VudFxuICB9XG5cbiAgaW5zcGVjdCgpIHtcbiAgICByZXR1cm4ge1xuICAgICAgc3RhY2s6IHRoaXMuc3RhY2ssXG4gICAgICBkYXRhOiB0aGlzLmRhdGEsXG4gICAgICByZXE6IFwiPG5vZGUgcmVxPlwiLFxuICAgICAgcmVzOiBcIjxub2RlIHJlcz5cIixcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgQ29udGV4dFxuIl19