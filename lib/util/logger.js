"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Logger = undefined;

var _hostPkg = require("./host-pkg");

var _hostPkg2 = _interopRequireDefault(_hostPkg);

var _memoryConsole = require("./memory-console");

var _memoryConsole2 = _interopRequireDefault(_memoryConsole);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

/* https://cloud.google.com/logging/docs/reference/v2/rest/v2/LogEntry */
/* https://github.com/GoogleCloudPlatform/fluent-plugin-google-cloud/blob/master/lib/fluent/plugin/out_google_cloud.rb */
/* Note, this is actually the contents of jsonPayload, so it can contain
   arbitrary fields! */
let Logger = exports.Logger = class Logger {

  static get formatter() {
    return process.env.NODE_ENV === "development" ? Logger.PRETTY : Logger.JSON;
  }

  static get console() {
    return process.env.NODE_ENV === "test" ? new _memoryConsole2.default() : console;
  }

  static get service() {
    return {
      service: _hostPkg2.default.name,
      version: _hostPkg2.default.version
    };
  }

  constructor(console = Logger.console, formatter = Logger.formatter, service = Logger.service) {
    this.console = console;
    this.formatter = formatter;
    this.service = service;

    Object.freeze(this);
  }

  write(severity, message, context) {
    const entry = {
      time: new Date(),
      message: typeof message === "object" ? JSON.stringify(message) : String(message),
      serviceContext: this.service,
      severity
    };

    this.console.log(this.formatter(Object.assign(entry, context)));
  }

  debug(message, context = {}) {
    this.write("DEBUG", message, context);
  }

  info(message, context = {}) {
    this.write("INFO", message, context);
  }

  notice(message, context = {}) {
    this.write("NOTICE", message, context);
  }

  warning(message, context = {}) {
    this.write("WARNING", message, context);
  }

  error(message, context = {}) {
    this.write("ERROR", message, context);
  }

  critical(message, context = {}) {
    this.write("CRITICAL", message, context);
  }
};
Logger.JSON = JSON.stringify;

Logger.PRETTY = entry => {
  const reset = "\x1b[0m";
  const bold = "\x1b[1m";

  const black = "\x1b[30m";
  const red = "\x1b[31m";
  const green = "\x1b[32m";
  const yellow = "\x1b[33m";
  // const blue = "\x1b[34m"

  const dateOptions = {
    year: "numeric",
    month: "short",
    day: "numeric",
    hour: "2-digit",
    minute: "2-digit",
    second: "2-digit",
    hour12: false
  };

  const styles = {
    DEBUG: black + bold,
    INFO: reset,
    NOTICE: green + bold,
    WARNING: yellow + bold,
    ERROR: red + bold,
    CRITICAL: red + bold,
    ALERT: red + bold,
    EMERGENCY: red + bold
  };

  const time = `[${entry.time.toLocaleString("en", dateOptions)}]`;

  let http = "";
  if (entry.httpRequest) {
    const { remoteIp, requestMethod, requestUrl, status, responseSize } = entry.httpRequest;
    http = `${remoteIp || "unknown"} - ${requestMethod.toUpperCase()} ${requestUrl} ${status} ${responseSize} - `;
  }

  return `${time} ${styles[entry.severity]}${http}${entry.message}${reset}`;
};

exports.default = Logger;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy91dGlsL2xvZ2dlci5qcyJdLCJuYW1lcyI6WyJMb2dnZXIiLCJmb3JtYXR0ZXIiLCJwcm9jZXNzIiwiZW52IiwiTk9ERV9FTlYiLCJQUkVUVFkiLCJKU09OIiwiY29uc29sZSIsInNlcnZpY2UiLCJuYW1lIiwidmVyc2lvbiIsImNvbnN0cnVjdG9yIiwiT2JqZWN0IiwiZnJlZXplIiwid3JpdGUiLCJzZXZlcml0eSIsIm1lc3NhZ2UiLCJjb250ZXh0IiwiZW50cnkiLCJ0aW1lIiwiRGF0ZSIsInN0cmluZ2lmeSIsIlN0cmluZyIsInNlcnZpY2VDb250ZXh0IiwibG9nIiwiYXNzaWduIiwiZGVidWciLCJpbmZvIiwibm90aWNlIiwid2FybmluZyIsImVycm9yIiwiY3JpdGljYWwiLCJyZXNldCIsImJvbGQiLCJibGFjayIsInJlZCIsImdyZWVuIiwieWVsbG93IiwiZGF0ZU9wdGlvbnMiLCJ5ZWFyIiwibW9udGgiLCJkYXkiLCJob3VyIiwibWludXRlIiwic2Vjb25kIiwiaG91cjEyIiwic3R5bGVzIiwiREVCVUciLCJJTkZPIiwiTk9USUNFIiwiV0FSTklORyIsIkVSUk9SIiwiQ1JJVElDQUwiLCJBTEVSVCIsIkVNRVJHRU5DWSIsInRvTG9jYWxlU3RyaW5nIiwiaHR0cCIsImh0dHBSZXF1ZXN0IiwicmVtb3RlSXAiLCJyZXF1ZXN0TWV0aG9kIiwicmVxdWVzdFVybCIsInN0YXR1cyIsInJlc3BvbnNlU2l6ZSIsInRvVXBwZXJDYXNlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7Ozs7QUFFQTs7Ozs7O0FBZ0NBO0FBQ0E7QUFDQTs7SUFjYUEsTSxXQUFBQSxNLEdBQU4sTUFBTUEsTUFBTixDQUFhOztBQWlEbEIsYUFBV0MsU0FBWCxHQUFvRDtBQUNsRCxXQUFPQyxRQUFRQyxHQUFSLENBQVlDLFFBQVosS0FBeUIsYUFBekIsR0FBeUNKLE9BQU9LLE1BQWhELEdBQXlETCxPQUFPTSxJQUF2RTtBQUNEOztBQUVELGFBQVdDLE9BQVgsR0FB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O0FBTWJtQixjQUFVakIsTUFBTUYsSUFOSDtBQU9ib0IsV0FBT2xCLE1BQU1GLElBUEE7QUFRYnFCLGVBQVduQixNQUFNRjtBQVJKLEdBQWY7O0FBV0EsUUFBTWQsT0FBUSxJQUFHRCxNQUFNQyxJQUFOLENBQVdvQyxjQUFYLENBQTBCLElBQTFCLEVBQWdDakIsV0FBaEMsQ0FBNkMsR0FBOUQ7O0FBRUEsTUFBSWtCLE9BQU8sRUFBWDtBQUNBLE1BQUl0QyxNQUFNdUMsV0FBVixFQUF1QjtBQUNyQixVQUFNLEVBQUNDLFFBQUQsRUFBV0MsYUFBWCxFQUEwQkMsVUFBMUIsRUFBc0NDLE1BQXRDLEVBQThDQyxZQUE5QyxLQUE4RDVDLE1BQU11QyxXQUExRTtBQUNBRCxXQUFRLEdBQUVFLFlBQVksU0FBVSxNQUFLQyxjQUFjSSxXQUFkLEVBQTRCLElBQUdILFVBQVcsSUFBR0MsTUFBTyxJQUFHQyxZQUFhLEtBQXpHO0FBQ0Q7O0FBRUQsU0FBUSxHQUFFM0MsSUFBSyxJQUFHMkIsT0FBTzVCLE1BQU1ILFFBQWIsQ0FBdUIsR0FBRXlDLElBQUssR0FBRXRDLE1BQU1GLE9BQVEsR0FBRWdCLEtBQU0sRUFBeEU7QUFDRCxDOztrQkErRFloQyxNIiwiZmlsZSI6ImxvZ2dlci5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5pbXBvcnQgaG9zdFBrZyBmcm9tIFwiLi9ob3N0LXBrZ1wiXG5cbmltcG9ydCBNZW1vcnlDb25zb2xlIGZyb20gXCIuL21lbW9yeS1jb25zb2xlXCJcblxuZXhwb3J0IHR5cGUgSHR0cFJlcXVlc3QgPSB7fFxuICByZXF1ZXN0TWV0aG9kOiBzdHJpbmcsXG4gIHJlcXVlc3RVcmw6IHN0cmluZyxcbiAgcmVxdWVzdFNpemU6IG51bWJlcixcbiAgc3RhdHVzOiBudW1iZXIsXG4gIHJlc3BvbnNlU2l6ZTogbnVtYmVyLFxuICB1c2VyQWdlbnQ/OiBzdHJpbmcsXG4gIHJlbW90ZUlwPzogc3RyaW5nLFxuICByZWZlcmVyPzogc3RyaW5nLFxuICBsYXRlbmN5Pzogc3RyaW5nLFxuICBjYWNoZUhpdD86IGJvb2xlYW4sXG4gIGNhY2hlVmFsaWRhdGVkV2l0aE9yaWdpblNlcnZlcj86IGJvb2xlYW4sXG58fVxuXG5leHBvcnQgdHlwZSBTZXJ2aWNlQ29udGV4dCA9IHt8XG4gIHNlcnZpY2U6IHN0cmluZyxcbiAgdmVyc2lvbj86IHN0cmluZyxcbnx9XG5cbmV4cG9ydCB0eXBlIExvZ1NldmVyaXR5ID0gKFxuICBcIkRFQlVHXCIgfFxuICBcIklORk9cIiB8XG4gIFwiTk9USUNFXCIgfFxuICBcIldBUk5JTkdcIiB8XG4gIFwiRVJST1JcIiB8XG4gIFwiQ1JJVElDQUxcIiB8XG4gIFwiQUxFUlRcIiB8XG4gIFwiRU1FUkdFTkNZXCJcbilcblxuLyogaHR0cHM6Ly9jbG91ZC5nb29nbGUuY29tL2xvZ2dpbmcvZG9jcy9yZWZlcmVuY2UvdjIvcmVzdC92Mi9Mb2dFbnRyeSAqL1xuLyogaHR0cHM6Ly9naXRodWIuY29tL0dvb2dsZUNsb3VkUGxhdGZvcm0vZmx1ZW50LXBsdWdpbi1nb29nbGUtY2xvdWQvYmxvYi9tYXN0ZXIvbGliL2ZsdWVudC9wbHVnaW4vb3V0X2dvb2dsZV9jbG91ZC5yYiAqL1xuLyogTm90ZSwgdGhpcyBpcyBhY3R1YWxseSB0aGUgY29udGVudHMgb2YganNvblBheWxvYWQsIHNvIGl0IGNhbiBjb250YWluXG4gICBhcmJpdHJhcnkgZmllbGRzISAqL1xuZXhwb3J0IHR5cGUgTG9nRW50cnkgPSB7XG4gIHRpbWU6IERhdGUsXG4gIG1lc3NhZ2U6IHN0cmluZyxcbiAgc2V2ZXJpdHk6IExvZ1NldmVyaXR5LFxuICBodHRwUmVxdWVzdD86IEh0dHBSZXF1ZXN0LFxuICBzZXJ2aWNlQ29udGV4dD86IFNlcnZpY2VDb250ZXh0LFxufVxuXG5leHBvcnQgdHlwZSBMb2dDb250ZXh0ID0ge1xuICBodHRwUmVxdWVzdD86IEh0dHBSZXF1ZXN0LFxufVxuXG5leHBvcnQgY2xhc3MgTG9nZ2VyIHtcbiAgY29uc29sZTogY29uc29sZS5Db25zb2xlXG4gIGZvcm1hdHRlcjogTG9nRW50cnkgPT4gc3RyaW5nXG4gIHNlcnZpY2U6IFNlcnZpY2VDb250ZXh0XG5cbiAgc3RhdGljIEpTT04gPSBKU09OLnN0cmluZ2lmeVxuXG4gIHN0YXRpYyBQUkVUVFkgPSAoZW50cnk6IExvZ0VudHJ5KSA9PiB7XG4gICAgY29uc3QgcmVzZXQgPSBcIlxceDFiWzBtXCJcbiAgICBjb25zdCBib2xkID0gXCJcXHgxYlsxbVwiXG5cbiAgICBjb25zdCBibGFjayA9IFwiXFx4MWJbMzBtXCJcbiAgICBjb25zdCByZWQgPSBcIlxceDFiWzMxbVwiXG4gICAgY29uc3QgZ3JlZW4gPSBcIlxceDFiWzMybVwiXG4gICAgY29uc3QgeWVsbG93ID0gXCJcXHgxYlszM21cIlxuICAgIC8vIGNvbnN0IGJsdWUgPSBcIlxceDFiWzM0bVwiXG5cbiAgICBjb25zdCBkYXRlT3B0aW9ucyA9IHtcbiAgICAgIHllYXI6IFwibnVtZXJpY1wiLFxuICAgICAgbW9udGg6IFwic2hvcnRcIixcbiAgICAgIGRheTogXCJudW1lcmljXCIsXG4gICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgIG1pbnV0ZTogXCIyLWRpZ2l0XCIsXG4gICAgICBzZWNvbmQ6IFwiMi1kaWdpdFwiLFxuICAgICAgaG91cjEyOiBmYWxzZSxcbiAgICB9XG5cbiAgICBjb25zdCBzdHlsZXMgPSB7XG4gICAgICBERUJVRzogYmxhY2sgKyBib2xkLFxuICAgICAgSU5GTzogcmVzZXQsXG4gICAgICBOT1RJQ0U6IGdyZWVuICsgYm9sZCxcbiAgICAgIFdBUk5JTkc6IHllbGxvdyArIGJvbGQsXG4gICAgICBFUlJPUjogcmVkICsgYm9sZCxcbiAgICAgIENSSVRJQ0FMOiByZWQgKyBib2xkLFxuICAgICAgQUxFUlQ6IHJlZCArIGJvbGQsXG4gICAgICBFTUVSR0VOQ1k6IHJlZCArIGJvbGQsXG4gICAgfVxuXG4gICAgY29uc3QgdGltZSA9IGBbJHtlbnRyeS50aW1lLnRvTG9jYWxlU3RyaW5nKFwiZW5cIiwgZGF0ZU9wdGlvbnMpfV1gXG5cbiAgICBsZXQgaHR0cCA9IFwiXCJcbiAgICBpZiAoZW50cnkuaHR0cFJlcXVlc3QpIHtcbiAgICAgIGNvbnN0IHtyZW1vdGVJcCwgcmVxdWVzdE1ldGhvZCwgcmVxdWVzdFVybCwgc3RhdHVzLCByZXNwb25zZVNpemV9ID0gZW50cnkuaHR0cFJlcXVlc3RcbiAgICAgIGh0dHAgPSBgJHtyZW1vdGVJcCB8fCBcInVua25vd25cIn0gLSAke3JlcXVlc3RNZXRob2QudG9VcHBlckNhc2UoKX0gJHtyZXF1ZXN0VXJsfSAke3N0YXR1c30gJHtyZXNwb25zZVNpemV9IC0gYFxuICAgIH1cblxuICAgIHJldHVybiBgJHt0aW1lfSAke3N0eWxlc1tlbnRyeS5zZXZlcml0eV19JHtodHRwfSR7ZW50cnkubWVzc2FnZX0ke3Jlc2V0fWBcbiAgfVxuXG4gIHN0YXRpYyBnZXQgZm9ybWF0dGVyKCk6IChlbnRyeTogTG9nRW50cnkpID0+IHN0cmluZyB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSBcImRldmVsb3BtZW50XCIgPyBMb2dnZXIuUFJFVFRZIDogTG9nZ2VyLkpTT05cbiAgfVxuXG4gIHN0YXRpYyBnZXQgY29uc29sZSgpOiBjb25zb2xlLkNvbnNvbGUge1xuICAgIHJldHVybiBwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gXCJ0ZXN0XCIgPyBuZXcgTWVtb3J5Q29uc29sZSA6IGNvbnNvbGVcbiAgfVxuXG4gIHN0YXRpYyBnZXQgc2VydmljZSgpOiBTZXJ2aWNlQ29udGV4dCB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlcnZpY2U6IGhvc3RQa2cubmFtZSxcbiAgICAgIHZlcnNpb246IGhvc3RQa2cudmVyc2lvbixcbiAgICB9XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihjb25zb2xlOiBjb25zb2xlLkNvbnNvbGUgPSBMb2dnZXIuY29uc29sZSxcbiAgICAgICAgICAgICAgZm9ybWF0dGVyOiBMb2dFbnRyeSA9PiBzdHJpbmcgPSBMb2dnZXIuZm9ybWF0dGVyLFxuICAgICAgICAgICAgICBzZXJ2aWNlOiBTZXJ2aWNlQ29udGV4dCA9IExvZ2dlci5zZXJ2aWNlKSB7XG4gICAgdGhpcy5jb25zb2xlID0gY29uc29sZVxuICAgIHRoaXMuZm9ybWF0dGVyID0gZm9ybWF0dGVyXG4gICAgdGhpcy5zZXJ2aWNlID0gc2VydmljZVxuXG4gICAgT2JqZWN0LmZyZWV6ZSh0aGlzKVxuICB9XG5cbiAgd3JpdGUoc2V2ZXJpdHk6IExvZ1NldmVyaXR5LCBtZXNzYWdlOiBtaXhlZCwgY29udGV4dDogTG9nQ29udGV4dCkge1xuICAgIGNvbnN0IGVudHJ5OiBMb2dFbnRyeSA9IHtcbiAgICAgIHRpbWU6IG5ldyBEYXRlLFxuICAgICAgbWVzc2FnZTogdHlwZW9mIG1lc3NhZ2UgPT09IFwib2JqZWN0XCIgPyBKU09OLnN0cmluZ2lmeShtZXNzYWdlKSA6IFN0cmluZyhtZXNzYWdlKSxcbiAgICAgIHNlcnZpY2VDb250ZXh0OiB0aGlzLnNlcnZpY2UsXG4gICAgICBzZXZlcml0eSxcbiAgICB9XG5cbiAgICB0aGlzLmNvbnNvbGUubG9nKHRoaXMuZm9ybWF0dGVyKE9iamVjdC5hc3NpZ24oZW50cnksIGNvbnRleHQpKSlcbiAgfVxuXG4gIGRlYnVnKG1lc3NhZ2U6IG1peGVkLCBjb250ZXh0OiBMb2dDb250ZXh0ID0ge30pIHtcbiAgICB0aGlzLndyaXRlKFwiREVCVUdcIiwgbWVzc2FnZSwgY29udGV4dClcbiAgfVxuXG4gIGluZm8obWVzc2FnZTogbWl4ZWQsIGNvbnRleHQ6IExvZ0NvbnRleHQgPSB7fSkge1xuICAgIHRoaXMud3JpdGUoXCJJTkZPXCIsIG1lc3NhZ2UsIGNvbnRleHQpXG4gIH1cblxuICBub3RpY2UobWVzc2FnZTogbWl4ZWQsIGNvbnRleHQ6IExvZ0NvbnRleHQgPSB7fSkge1xuICAgIHRoaXMud3JpdGUoXCJOT1RJQ0VcIiwgbWVzc2FnZSwgY29udGV4dClcbiAgfVxuXG4gIHdhcm5pbmcobWVzc2FnZTogbWl4ZWQsIGNvbnRleHQ6IExvZ0NvbnRleHQgPSB7fSkge1xuICAgIHRoaXMud3JpdGUoXCJXQVJOSU5HXCIsIG1lc3NhZ2UsIGNvbnRleHQpXG4gIH1cblxuICBlcnJvcihtZXNzYWdlOiBtaXhlZCwgY29udGV4dDogTG9nQ29udGV4dCA9IHt9KSB7XG4gICAgdGhpcy53cml0ZShcIkVSUk9SXCIsIG1lc3NhZ2UsIGNvbnRleHQpXG4gIH1cblxuICBjcml0aWNhbChtZXNzYWdlOiBtaXhlZCwgY29udGV4dDogTG9nQ29udGV4dCA9IHt9KSB7XG4gICAgdGhpcy53cml0ZShcIkNSSVRJQ0FMXCIsIG1lc3NhZ2UsIGNvbnRleHQpXG4gIH1cbn1cblxuZXhwb3J0IGRlZmF1bHQgTG9nZ2VyXG4iXX0=