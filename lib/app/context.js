"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
let Context = exports.Context = class Context {

  constructor(stack, request, response) {
    this.body = "";
    this.data = Object.create(null);

    this.stack = stack;
    this.request = request;
    this.response = response;

    Object.seal(this);
  }

  get(header) {
    return this.request.headers[header.toLowerCase()];
  }

  get method() {
    return this.request.method;
  }

  get url() {
    return this.request.url;
  }

  set(header, value) {
    this.response.setHeader(header, value);
  }

  set status(value) {
    if (value < 100 || value > 999) {
      throw new RangeError(`Invalid status code ${value}`);
    }

    this.response.statusCode = value;
  }

  get sent() {
    return this.response.headersSent;
  }

  inspect() {
    return {
      stack: this.stack,
      data: this.data,
      req: "<node req>",
      res: "<node res>"
    };
  }
};
exports.default = Context;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHAvY29udGV4dC5qcyJdLCJuYW1lcyI6WyJDb250ZXh0IiwiY29uc3RydWN0b3IiLCJzdGFjayIsInJlcXVlc3QiLCJyZXNwb25zZSIsImJvZHkiLCJkYXRhIiwiT2JqZWN0IiwiY3JlYXRlIiwic2VhbCIsImdldCIsImhlYWRlciIsImhlYWRlcnMiLCJ0b0xvd2VyQ2FzZSIsIm1ldGhvZCIsInVybCIsInNldCIsInZhbHVlIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiUmFuZ2VFcnJvciIsInN0YXR1c0NvZGUiLCJzZW50IiwiaGVhZGVyc1NlbnQiLCJpbnNwZWN0IiwicmVxIiwicmVzIl0sIm1hcHBpbmdzIjoiOzs7OztJQU1hQSxPLFdBQUFBLE8sR0FBTixNQUFNQSxPQUFOLENBQWM7O0FBUW5CQyxjQUFZQyxLQUFaLEVBQTBCQyxPQUExQixFQUE0Q0MsUUFBNUMsRUFBZ0U7QUFBQSxTQUhoRUMsSUFHZ0UsR0FIeEMsRUFHd0M7QUFBQSxTQUZoRUMsSUFFZ0UsR0FGakRDLE9BQU9DLE1BQVAsQ0FBYyxJQUFkLENBRWlEOztBQUM5RCxTQUFLTixLQUFMLEdBQWFBLEtBQWI7QUFDQSxTQUFLQyxPQUFMLEdBQWVBLE9BQWY7QUFDQSxTQUFLQyxRQUFMLEdBQWdCQSxRQUFoQjs7QUFFQUcsV0FBT0UsSUFBUCxDQUFZLElBQVo7QUFDRDs7QUFFREMsTUFBSUMsTUFBSixFQUFvQjtBQUNsQixXQUFPLEtBQUtSLE9BQUwsQ0FBYVMsT0FBYixDQUFxQkQsT0FBT0UsV0FBUCxFQUFyQixDQUFQO0FBQ0Q7O0FBRUQsTUFBSUMsTUFBSixHQUFxQjtBQUNuQixXQUFPLEtBQUtYLE9BQUwsQ0FBYVcsTUFBcEI7QUFDRDs7QUFFRCxNQUFJQyxHQUFKLEdBQWtCO0FBQ2hCLFdBQU8sS0FBS1osT0FBTCxDQUFhWSxHQUFwQjtBQUNEOztBQUVEQyxNQUFJTCxNQUFKLEVBQW9CTSxLQUFwQixFQUFtQztBQUNqQyxTQUFLYixRQUFMLENBQWNjLFNBQWQsQ0FBd0JQLE1BQXhCLEVBQWdDTSxLQUFoQztBQUNEOztBQUVELE1BQUlFLE1BQUosQ0FBV0YsS0FBWCxFQUEwQjtBQUN4QixRQUFJQSxRQUFRLEdBQVIsSUFBZUEsUUFBUSxHQUEzQixFQUFnQztBQUM5QixZQUFNLElBQUlHLFVBQUosQ0FBZ0IsdUJBQXNCSCxLQUFNLEVBQTVDLENBQU47QUFDRDs7QUFFRCxTQUFLYixRQUFMLENBQWNpQixVQUFkLEdBQTJCSixLQUEzQjtBQUNEOztBQUVELE1BQUlLLElBQUosR0FBb0I7QUFDbEIsV0FBTyxLQUFLbEIsUUFBTCxDQUFjbUIsV0FBckI7QUFDRDs7QUFFREMsWUFBVTtBQUNSLFdBQU87QUFDTHRCLGFBQU8sS0FBS0EsS0FEUDtBQUVMSSxZQUFNLEtBQUtBLElBRk47QUFHTG1CLFdBQUssWUFIQTtBQUlMQyxXQUFLO0FBSkEsS0FBUDtBQU1EO0FBbkRrQixDO2tCQXNETjFCLE8iLCJmaWxlIjoiY29udGV4dC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIEBmbG93ICovXG5pbXBvcnQgdHlwZSB7U3RhY2t9IGZyb20gXCIuLi9taWRkbGV3YXJlXCJcbmltcG9ydCB0eXBlIHtJbmNvbWluZ01lc3NhZ2UgYXMgUmVxdWVzdCwgU2VydmVyUmVzcG9uc2UgYXMgUmVzcG9uc2V9IGZyb20gXCJodHRwXCJcblxuZXhwb3J0IHR5cGUge1JlcXVlc3QsIFJlc3BvbnNlfVxuXG5leHBvcnQgY2xhc3MgQ29udGV4dCB7XG4gIHN0YWNrOiBTdGFja1xuICByZXF1ZXN0OiBSZXF1ZXN0XG4gIHJlc3BvbnNlOiBSZXNwb25zZVxuXG4gIGJvZHk6IE9iamVjdCB8IHN0cmluZyA9IFwiXCJcbiAgZGF0YTogT2JqZWN0ID0gT2JqZWN0LmNyZWF0ZShudWxsKVxuXG4gIGNvbnN0cnVjdG9yKHN0YWNrOiBTdGFjaywgcmVxdWVzdDogUmVxdWVzdCwgcmVzcG9uc2U6IFJlc3BvbnNlKSB7XG4gICAgdGhpcy5zdGFjayA9IHN0YWNrXG4gICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdFxuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZVxuXG4gICAgT2JqZWN0LnNlYWwodGhpcylcbiAgfVxuXG4gIGdldChoZWFkZXI6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QuaGVhZGVyc1toZWFkZXIudG9Mb3dlckNhc2UoKV1cbiAgfVxuXG4gIGdldCBtZXRob2QoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0Lm1ldGhvZFxuICB9XG5cbiAgZ2V0IHVybCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QudXJsXG4gIH1cblxuICBzZXQoaGVhZGVyOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJlc3BvbnNlLnNldEhlYWRlcihoZWFkZXIsIHZhbHVlKVxuICB9XG5cbiAgc2V0IHN0YXR1cyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgaWYgKHZhbHVlIDwgMTAwIHx8IHZhbHVlID4gOTk5KSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3ZhbHVlfWApXG4gICAgfVxuXG4gICAgdGhpcy5yZXNwb25zZS5zdGF0dXNDb2RlID0gdmFsdWVcbiAgfVxuXG4gIGdldCBzZW50KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLmhlYWRlcnNTZW50XG4gIH1cblxuICBpbnNwZWN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIHJlcTogXCI8bm9kZSByZXE+XCIsXG4gICAgICByZXM6IFwiPG5vZGUgcmVzPlwiLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZXh0XG4iXX0=