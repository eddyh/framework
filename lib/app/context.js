"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
let Context = exports.Context = class Context {

  constructor(stack, request, response) {
    this.body = "";
    this.data = {};

    this.stack = stack;
    this.request = request;
    this.response = response;

    Object.seal(this);
  }

  get(header) {
    return this.request.headers[header.toLowerCase()];
  }

  get method() {
    return this.request.method;
  }

  get url() {
    return this.request.url;
  }

  set(header, value) {
    this.response.setHeader(header, value);
  }

  set status(value) {
    if (value < 100 || value > 999) {
      throw new RangeError(`Invalid status code ${value}`);
    }

    this.response.statusCode = value;
  }

  get sent() {
    return this.response.headersSent;
  }

  inspect() {
    return {
      stack: this.stack,
      data: this.data,
      req: "<node req>",
      res: "<node res>"
    };
  }
};
exports.default = Context;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9hcHAvY29udGV4dC5qcyJdLCJuYW1lcyI6WyJDb250ZXh0IiwiY29uc3RydWN0b3IiLCJzdGFjayIsInJlcXVlc3QiLCJyZXNwb25zZSIsImJvZHkiLCJkYXRhIiwiT2JqZWN0Iiwic2VhbCIsImdldCIsImhlYWRlciIsImhlYWRlcnMiLCJ0b0xvd2VyQ2FzZSIsIm1ldGhvZCIsInVybCIsInNldCIsInZhbHVlIiwic2V0SGVhZGVyIiwic3RhdHVzIiwiUmFuZ2VFcnJvciIsInN0YXR1c0NvZGUiLCJzZW50IiwiaGVhZGVyc1NlbnQiLCJpbnNwZWN0IiwicmVxIiwicmVzIl0sIm1hcHBpbmdzIjoiOzs7OztJQU1hQSxPLFdBQUFBLE8sR0FBTixNQUFNQSxPQUFOLENBQWM7O0FBUW5CQyxjQUFZQyxLQUFaLEVBQTBCQyxPQUExQixFQUE0Q0MsUUFBNUMsRUFBZ0U7QUFBQSxTQUhoRUMsSUFHZ0UsR0FIeEMsRUFHd0M7QUFBQSxTQUZoRUMsSUFFZ0UsR0FGakQsRUFFaUQ7O0FBQzlELFNBQUtKLEtBQUwsR0FBYUEsS0FBYjtBQUNBLFNBQUtDLE9BQUwsR0FBZUEsT0FBZjtBQUNBLFNBQUtDLFFBQUwsR0FBZ0JBLFFBQWhCOztBQUVBRyxXQUFPQyxJQUFQLENBQVksSUFBWjtBQUNEOztBQUVEQyxNQUFJQyxNQUFKLEVBQW9CO0FBQ2xCLFdBQU8sS0FBS1AsT0FBTCxDQUFhUSxPQUFiLENBQXFCRCxPQUFPRSxXQUFQLEVBQXJCLENBQVA7QUFDRDs7QUFFRCxNQUFJQyxNQUFKLEdBQXFCO0FBQ25CLFdBQU8sS0FBS1YsT0FBTCxDQUFhVSxNQUFwQjtBQUNEOztBQUVELE1BQUlDLEdBQUosR0FBa0I7QUFDaEIsV0FBTyxLQUFLWCxPQUFMLENBQWFXLEdBQXBCO0FBQ0Q7O0FBRURDLE1BQUlMLE1BQUosRUFBb0JNLEtBQXBCLEVBQW1DO0FBQ2pDLFNBQUtaLFFBQUwsQ0FBY2EsU0FBZCxDQUF3QlAsTUFBeEIsRUFBZ0NNLEtBQWhDO0FBQ0Q7O0FBRUQsTUFBSUUsTUFBSixDQUFXRixLQUFYLEVBQTBCO0FBQ3hCLFFBQUlBLFFBQVEsR0FBUixJQUFlQSxRQUFRLEdBQTNCLEVBQWdDO0FBQzlCLFlBQU0sSUFBSUcsVUFBSixDQUFnQix1QkFBc0JILEtBQU0sRUFBNUMsQ0FBTjtBQUNEOztBQUVELFNBQUtaLFFBQUwsQ0FBY2dCLFVBQWQsR0FBMkJKLEtBQTNCO0FBQ0Q7O0FBRUQsTUFBSUssSUFBSixHQUFvQjtBQUNsQixXQUFPLEtBQUtqQixRQUFMLENBQWNrQixXQUFyQjtBQUNEOztBQUVEQyxZQUFVO0FBQ1IsV0FBTztBQUNMckIsYUFBTyxLQUFLQSxLQURQO0FBRUxJLFlBQU0sS0FBS0EsSUFGTjtBQUdMa0IsV0FBSyxZQUhBO0FBSUxDLFdBQUs7QUFKQSxLQUFQO0FBTUQ7QUFuRGtCLEM7a0JBc0ROekIsTyIsImZpbGUiOiJjb250ZXh0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cbmltcG9ydCB0eXBlIHtTdGFja30gZnJvbSBcIi4uL21pZGRsZXdhcmVcIlxuaW1wb3J0IHR5cGUge0luY29taW5nTWVzc2FnZSBhcyBSZXF1ZXN0LCBTZXJ2ZXJSZXNwb25zZSBhcyBSZXNwb25zZX0gZnJvbSBcImh0dHBcIlxuXG5leHBvcnQgdHlwZSB7UmVxdWVzdCwgUmVzcG9uc2V9XG5cbmV4cG9ydCBjbGFzcyBDb250ZXh0IHtcbiAgc3RhY2s6IFN0YWNrXG4gIHJlcXVlc3Q6IFJlcXVlc3RcbiAgcmVzcG9uc2U6IFJlc3BvbnNlXG5cbiAgYm9keTogT2JqZWN0IHwgc3RyaW5nID0gXCJcIlxuICBkYXRhOiBPYmplY3QgPSB7fVxuXG4gIGNvbnN0cnVjdG9yKHN0YWNrOiBTdGFjaywgcmVxdWVzdDogUmVxdWVzdCwgcmVzcG9uc2U6IFJlc3BvbnNlKSB7XG4gICAgdGhpcy5zdGFjayA9IHN0YWNrXG4gICAgdGhpcy5yZXF1ZXN0ID0gcmVxdWVzdFxuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZVxuXG4gICAgT2JqZWN0LnNlYWwodGhpcylcbiAgfVxuXG4gIGdldChoZWFkZXI6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QuaGVhZGVyc1toZWFkZXIudG9Mb3dlckNhc2UoKV1cbiAgfVxuXG4gIGdldCBtZXRob2QoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0Lm1ldGhvZFxuICB9XG5cbiAgZ2V0IHVybCgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLnJlcXVlc3QudXJsXG4gIH1cblxuICBzZXQoaGVhZGVyOiBzdHJpbmcsIHZhbHVlOiBzdHJpbmcpIHtcbiAgICB0aGlzLnJlc3BvbnNlLnNldEhlYWRlcihoZWFkZXIsIHZhbHVlKVxuICB9XG5cbiAgc2V0IHN0YXR1cyh2YWx1ZTogbnVtYmVyKSB7XG4gICAgaWYgKHZhbHVlIDwgMTAwIHx8IHZhbHVlID4gOTk5KSB7XG4gICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcihgSW52YWxpZCBzdGF0dXMgY29kZSAke3ZhbHVlfWApXG4gICAgfVxuXG4gICAgdGhpcy5yZXNwb25zZS5zdGF0dXNDb2RlID0gdmFsdWVcbiAgfVxuXG4gIGdldCBzZW50KCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlLmhlYWRlcnNTZW50XG4gIH1cblxuICBpbnNwZWN0KCkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFjazogdGhpcy5zdGFjayxcbiAgICAgIGRhdGE6IHRoaXMuZGF0YSxcbiAgICAgIHJlcTogXCI8bm9kZSByZXE+XCIsXG4gICAgICByZXM6IFwiPG5vZGUgcmVzPlwiLFxuICAgIH1cbiAgfVxufVxuXG5leHBvcnQgZGVmYXVsdCBDb250ZXh0XG4iXX0=