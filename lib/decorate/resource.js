"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.resource = resource;

var _route = require("./route");

function resource({ singular } = { singular: false }) {
  const single = [["show", "GET", "/"], ["create", "POST", "/"], ["update", "PATCH", "/"], ["destroy", "DELETE", "/"], ["new", "GET", "/new"], ["edit", "GET", "/edit"]];

  const plural = [["index", "GET", "/"], ["show", "GET", "/{id}"], ["create", "POST", "/"], ["update", "PATCH", "/{id}"], ["destroy", "DELETE", "/{id}"], ["new", "GET", "/new"], ["edit", "GET", "/{id}/edit"]];

  const map = singular ? single : plural;

  return object => {
    for (const [name, method, pattern] of map) {
      let descriptor = Object.getOwnPropertyDescriptor(object.prototype, name);
      if (descriptor) {
        const decorate = (0, _route.route)(pattern, { method });
        descriptor = decorate(object.prototype, name, descriptor);
        Object.defineProperty(object.prototype, name, descriptor);
      }
    }
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWNvcmF0ZS9yZXNvdXJjZS5qcyJdLCJuYW1lcyI6WyJyZXNvdXJjZSIsInNpbmd1bGFyIiwic2luZ2xlIiwicGx1cmFsIiwibWFwIiwib2JqZWN0IiwibmFtZSIsIm1ldGhvZCIsInBhdHRlcm4iLCJkZXNjcmlwdG9yIiwiT2JqZWN0IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwicHJvdG90eXBlIiwiZGVjb3JhdGUiLCJkZWZpbmVQcm9wZXJ0eSJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFLZ0JBLFEsR0FBQUEsUTs7QUFKaEI7O0FBSU8sU0FBU0EsUUFBVCxDQUFrQixFQUFDQyxRQUFELEtBQThCLEVBQUNBLFVBQVUsS0FBWCxFQUFoRCxFQUE4RTtBQUNuRixRQUFNQyxTQUFTLENBQ2IsQ0FBQyxNQUFELEVBQVMsS0FBVCxFQUFnQixHQUFoQixDQURhLEVBRWIsQ0FBQyxRQUFELEVBQVcsTUFBWCxFQUFtQixHQUFuQixDQUZhLEVBR2IsQ0FBQyxRQUFELEVBQVcsT0FBWCxFQUFvQixHQUFwQixDQUhhLEVBSWIsQ0FBQyxTQUFELEVBQVksUUFBWixFQUFzQixHQUF0QixDQUphLEVBTWIsQ0FBQyxLQUFELEVBQVEsS0FBUixFQUFlLE1BQWYsQ0FOYSxFQU9iLENBQUMsTUFBRCxFQUFTLEtBQVQsRUFBZ0IsT0FBaEIsQ0FQYSxDQUFmOztBQVVBLFFBQU1DLFNBQVMsQ0FDYixDQUFDLE9BQUQsRUFBVSxLQUFWLEVBQWlCLEdBQWpCLENBRGEsRUFFYixDQUFDLE1BQUQsRUFBUyxLQUFULEVBQWdCLE9BQWhCLENBRmEsRUFHYixDQUFDLFFBQUQsRUFBVyxNQUFYLEVBQW1CLEdBQW5CLENBSGEsRUFJYixDQUFDLFFBQUQsRUFBVyxPQUFYLEVBQW9CLE9BQXBCLENBSmEsRUFLYixDQUFDLFNBQUQsRUFBWSxRQUFaLEVBQXNCLE9BQXRCLENBTGEsRUFPYixDQUFDLEtBQUQsRUFBUSxLQUFSLEVBQWUsTUFBZixDQVBhLEVBUWIsQ0FBQyxNQUFELEVBQVMsS0FBVCxFQUFnQixZQUFoQixDQVJhLENBQWY7O0FBV0EsUUFBTUMsTUFBTUgsV0FBV0MsTUFBWCxHQUFvQkMsTUFBaEM7O0FBRUEsU0FBUUUsTUFBRCxJQUFvQjtBQUN6QixTQUFLLE1BQU0sQ0FBQ0MsSUFBRCxFQUFPQyxNQUFQLEVBQWVDLE9BQWYsQ0FBWCxJQUFzQ0osR0FBdEMsRUFBMkM7QUFDekMsVUFBSUssYUFBYUMsT0FBT0Msd0JBQVAsQ0FBZ0NOLE9BQU9PLFNBQXZDLEVBQWtETixJQUFsRCxDQUFqQjtBQUNBLFVBQUlHLFVBQUosRUFBZ0I7QUFDZCxjQUFNSSxXQUFXLGtCQUFNTCxPQUFOLEVBQWUsRUFBQ0QsTUFBRCxFQUFmLENBQWpCO0FBQ0FFLHFCQUFhSSxTQUFTUixPQUFPTyxTQUFoQixFQUEyQk4sSUFBM0IsRUFBaUNHLFVBQWpDLENBQWI7QUFDQUMsZUFBT0ksY0FBUCxDQUFzQlQsT0FBT08sU0FBN0IsRUFBd0NOLElBQXhDLEVBQThDRyxVQUE5QztBQUNEO0FBQ0Y7QUFDRixHQVREO0FBVUQiLCJmaWxlIjoicmVzb3VyY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKiBAZmxvdyAqL1xuaW1wb3J0IHtyb3V0ZX0gZnJvbSBcIi4vcm91dGVcIlxuXG5leHBvcnQgdHlwZSBSZXNvdXJjZU9wdGlvbnMgPSB7c2luZ3VsYXI6IGJvb2xlYW59XG5cbmV4cG9ydCBmdW5jdGlvbiByZXNvdXJjZSh7c2luZ3VsYXJ9OiBSZXNvdXJjZU9wdGlvbnMgPSB7c2luZ3VsYXI6IGZhbHNlfSk6IERlY29yYXRvciB7XG4gIGNvbnN0IHNpbmdsZSA9IFtcbiAgICBbXCJzaG93XCIsIFwiR0VUXCIsIFwiL1wiXSxcbiAgICBbXCJjcmVhdGVcIiwgXCJQT1NUXCIsIFwiL1wiXSxcbiAgICBbXCJ1cGRhdGVcIiwgXCJQQVRDSFwiLCBcIi9cIl0sXG4gICAgW1wiZGVzdHJveVwiLCBcIkRFTEVURVwiLCBcIi9cIl0sXG5cbiAgICBbXCJuZXdcIiwgXCJHRVRcIiwgXCIvbmV3XCJdLFxuICAgIFtcImVkaXRcIiwgXCJHRVRcIiwgXCIvZWRpdFwiXSxcbiAgXVxuXG4gIGNvbnN0IHBsdXJhbCA9IFtcbiAgICBbXCJpbmRleFwiLCBcIkdFVFwiLCBcIi9cIl0sXG4gICAgW1wic2hvd1wiLCBcIkdFVFwiLCBcIi97aWR9XCJdLFxuICAgIFtcImNyZWF0ZVwiLCBcIlBPU1RcIiwgXCIvXCJdLFxuICAgIFtcInVwZGF0ZVwiLCBcIlBBVENIXCIsIFwiL3tpZH1cIl0sXG4gICAgW1wiZGVzdHJveVwiLCBcIkRFTEVURVwiLCBcIi97aWR9XCJdLFxuXG4gICAgW1wibmV3XCIsIFwiR0VUXCIsIFwiL25ld1wiXSxcbiAgICBbXCJlZGl0XCIsIFwiR0VUXCIsIFwiL3tpZH0vZWRpdFwiXSxcbiAgXVxuXG4gIGNvbnN0IG1hcCA9IHNpbmd1bGFyID8gc2luZ2xlIDogcGx1cmFsXG5cbiAgcmV0dXJuIChvYmplY3Q6IE9iamVjdCkgPT4ge1xuICAgIGZvciAoY29uc3QgW25hbWUsIG1ldGhvZCwgcGF0dGVybl0gb2YgbWFwKSB7XG4gICAgICBsZXQgZGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Iob2JqZWN0LnByb3RvdHlwZSwgbmFtZSlcbiAgICAgIGlmIChkZXNjcmlwdG9yKSB7XG4gICAgICAgIGNvbnN0IGRlY29yYXRlID0gcm91dGUocGF0dGVybiwge21ldGhvZH0pXG4gICAgICAgIGRlc2NyaXB0b3IgPSBkZWNvcmF0ZShvYmplY3QucHJvdG90eXBlLCBuYW1lLCBkZXNjcmlwdG9yKVxuICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkob2JqZWN0LnByb3RvdHlwZSwgbmFtZSwgZGVzY3JpcHRvcilcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cbiJdfQ==