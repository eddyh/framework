"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.PUT = exports.POST = exports.PATCH = exports.DELETE = exports.GET = undefined;
exports.route = route;
exports.mount = mount;

var _routerify = require("./util/routerify");

var _routerify2 = _interopRequireDefault(_routerify);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function route(pattern, { method }) {
  return (object, key, descriptor) => {
    if (!descriptor) throw new TypeError("Property expected");
    descriptor.enumerable = true;
    (0, _routerify2.default)(object).define(method, pattern, descriptor.value);
    return descriptor;
  };
}
function mount(pattern, controller) {
  return object => {
    const router = (0, _routerify2.default)(controller.prototype);
    (0, _routerify2.default)(object.prototype).mount(pattern, router);
  };
}

function defineMethod(method) {
  return pattern => route(pattern, { method });
}

const GET = exports.GET = defineMethod("GET");
const DELETE = exports.DELETE = defineMethod("DELETE");
const PATCH = exports.PATCH = defineMethod("PATCH");
const POST = exports.POST = defineMethod("POST");
const PUT = exports.PUT = defineMethod("PUT");
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uLy4uL3NyYy9kZWNvcmF0ZS9yb3V0ZS5qcyJdLCJuYW1lcyI6WyJyb3V0ZSIsIm1vdW50IiwicGF0dGVybiIsIm1ldGhvZCIsIm9iamVjdCIsImtleSIsImRlc2NyaXB0b3IiLCJUeXBlRXJyb3IiLCJlbnVtZXJhYmxlIiwiZGVmaW5lIiwidmFsdWUiLCJjb250cm9sbGVyIiwicm91dGVyIiwicHJvdG90eXBlIiwiZGVmaW5lTWV0aG9kIiwiR0VUIiwiREVMRVRFIiwiUEFUQ0giLCJQT1NUIiwiUFVUIl0sIm1hcHBpbmdzIjoiOzs7Ozs7UUFLZ0JBLEssR0FBQUEsSztRQVNBQyxLLEdBQUFBLEs7O0FBYmhCOzs7Ozs7QUFJTyxTQUFTRCxLQUFULENBQWVFLE9BQWYsRUFBZ0MsRUFBQ0MsTUFBRCxFQUFoQyxFQUFtRTtBQUN4RSxTQUFPLENBQUNDLE1BQUQsRUFBaUJDLEdBQWpCLEVBQStCQyxVQUEvQixLQUEyRDtBQUNoRSxRQUFJLENBQUNBLFVBQUwsRUFBaUIsTUFBTSxJQUFJQyxTQUFKLENBQWMsbUJBQWQsQ0FBTjtBQUNqQkQsZUFBV0UsVUFBWCxHQUF3QixJQUF4QjtBQUNBLDZCQUFVSixNQUFWLEVBQWtCSyxNQUFsQixDQUF5Qk4sTUFBekIsRUFBaUNELE9BQWpDLEVBQTBDSSxXQUFXSSxLQUFyRDtBQUNBLFdBQU9KLFVBQVA7QUFDRCxHQUxEO0FBTUQ7QUFFTSxTQUFTTCxLQUFULENBQWVDLE9BQWYsRUFBZ0NTLFVBQWhDLEVBQW9EO0FBQ3pELFNBQVFQLE1BQUQsSUFBb0I7QUFDekIsVUFBTVEsU0FBUyx5QkFBVUQsV0FBV0UsU0FBckIsQ0FBZjtBQUNBLDZCQUFVVCxPQUFPUyxTQUFqQixFQUE0QlosS0FBNUIsQ0FBa0NDLE9BQWxDLEVBQTJDVSxNQUEzQztBQUNELEdBSEQ7QUFJRDs7QUFFRCxTQUFTRSxZQUFULENBQXNCWCxNQUF0QixFQUE4QjtBQUM1QixTQUFRRCxPQUFELElBQXFCRixNQUFNRSxPQUFOLEVBQWUsRUFBQ0MsTUFBRCxFQUFmLENBQTVCO0FBQ0Q7O0FBRU0sTUFBTVksb0JBQU1ELGFBQWEsS0FBYixDQUFaO0FBQ0EsTUFBTUUsMEJBQVNGLGFBQWEsUUFBYixDQUFmO0FBQ0EsTUFBTUcsd0JBQVFILGFBQWEsT0FBYixDQUFkO0FBQ0EsTUFBTUksc0JBQU9KLGFBQWEsTUFBYixDQUFiO0FBQ0EsTUFBTUssb0JBQU1MLGFBQWEsS0FBYixDQUFaIiwiZmlsZSI6InJvdXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyogQGZsb3cgKi9cbmltcG9ydCByb3V0ZXJpZnkgZnJvbSBcIi4vdXRpbC9yb3V0ZXJpZnlcIlxuXG5leHBvcnQgdHlwZSBSb3V0ZU9wdGlvbnMgPSB7bWV0aG9kOiBzdHJpbmd9XG5cbmV4cG9ydCBmdW5jdGlvbiByb3V0ZShwYXR0ZXJuOiBzdHJpbmcsIHttZXRob2R9OiBSb3V0ZU9wdGlvbnMpOiBEZWNvcmF0b3Ige1xuICByZXR1cm4gKG9iamVjdDogT2JqZWN0LCBrZXk6ID9zdHJpbmcsIGRlc2NyaXB0b3I6ID9EZXNjcmlwdG9yKSA9PiB7XG4gICAgaWYgKCFkZXNjcmlwdG9yKSB0aHJvdyBuZXcgVHlwZUVycm9yKFwiUHJvcGVydHkgZXhwZWN0ZWRcIilcbiAgICBkZXNjcmlwdG9yLmVudW1lcmFibGUgPSB0cnVlXG4gICAgcm91dGVyaWZ5KG9iamVjdCkuZGVmaW5lKG1ldGhvZCwgcGF0dGVybiwgZGVzY3JpcHRvci52YWx1ZSlcbiAgICByZXR1cm4gZGVzY3JpcHRvclxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBtb3VudChwYXR0ZXJuOiBzdHJpbmcsIGNvbnRyb2xsZXI6IE9iamVjdCkge1xuICByZXR1cm4gKG9iamVjdDogT2JqZWN0KSA9PiB7XG4gICAgY29uc3Qgcm91dGVyID0gcm91dGVyaWZ5KGNvbnRyb2xsZXIucHJvdG90eXBlKVxuICAgIHJvdXRlcmlmeShvYmplY3QucHJvdG90eXBlKS5tb3VudChwYXR0ZXJuLCByb3V0ZXIpXG4gIH1cbn1cblxuZnVuY3Rpb24gZGVmaW5lTWV0aG9kKG1ldGhvZCkge1xuICByZXR1cm4gKHBhdHRlcm46IHN0cmluZykgPT4gcm91dGUocGF0dGVybiwge21ldGhvZH0pXG59XG5cbmV4cG9ydCBjb25zdCBHRVQgPSBkZWZpbmVNZXRob2QoXCJHRVRcIilcbmV4cG9ydCBjb25zdCBERUxFVEUgPSBkZWZpbmVNZXRob2QoXCJERUxFVEVcIilcbmV4cG9ydCBjb25zdCBQQVRDSCA9IGRlZmluZU1ldGhvZChcIlBBVENIXCIpXG5leHBvcnQgY29uc3QgUE9TVCA9IGRlZmluZU1ldGhvZChcIlBPU1RcIilcbmV4cG9ydCBjb25zdCBQVVQgPSBkZWZpbmVNZXRob2QoXCJQVVRcIilcbiJdfQ==